Структура и наполнение таблицы

book_id	                           title	           author	          price	            amount
INT PRIMARY KEY AUTO_INCREMENT   VARCHAR(50)	         VARCHAR(30)	       DECIMAL(8,2)	     INT
  1	                      Мастер и Маргарита        Булгаков М.А.	          670.99	      3
  2	                      Белая гвардия	        Булгаков М.А.	          540.50	      5
  3	                      Идиот	                Достоевский Ф.М.	  460.00	      10
  4	                      Братья Карамазовы	        Достоевский Ф.М.	  799.01	      3
  5	                      Игрок	                Достоевский Ф.М.	  480.50	      10
  6	                      Стихотворения и поэмы	Есенин С.А.	          650.00	      15


1. Вывести информацию (автора, название и цену) о  книгах, цены которых меньше или равны средней цене книг на складе. Информацию вывести в отсортированном по убыванию цены виде. Среднее вычислить как среднее по цене книги.
    select author, title, price
    from book 
    where price <= (
    select avg(price) from book 
    )
    order by price desc; 


2. Вывести информацию (автора, название и цену) о тех книгах, цены которых превышают минимальную цену книги на складе не более чем на 150 рублей в отсортированном по возрастанию цены виде.
    select author, title, price
    from book
    where price - (select min(price) from book) <= 150
    order by price asc;


3. Вывести информацию (автора, книгу и количество) о тех книгах, количество экземпляров которых в таблице book не дублируется.
    select author, title, amount 
    from book 
    where amount in (
      select amount from book
      group by amount
      having count(amount) = 1
    );


4. Вывести информацию о книгах(автор, название, цена), цена которых меньше самой большой из минимальных цен, вычисленных для каждого автора.
    select author, title, price 
    from book
    where price < ANY(
        SELECT min(price) 
        FROM book 
        GROUP BY author
    );


5. Посчитать сколько и каких экземпляров книг нужно заказать поставщикам, чтобы на складе стало одинаковое количество экземпляров каждой книги, равное значению самого большего количества экземпляров одной книги на складе. Вывести название книги, ее автора, текущее количество экземпляров на складе и количество заказываемых экземпляров книг. Последнему столбцу присвоить имя Заказ.
    select title, author, amount,
    (select max(amount) from book) - amount as Заказ
    from book
    where amount not in(select max(amount) from book);




